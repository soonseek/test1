# 코드 사양 (Code Specification)

**Task ID**: task-1-1-5
**제목**: 데이터 매핑 및 이미지 URL 생성 로직 구현

이 사양은 PokeAPI의 원본 데이터를 앱에서 사용하는 표준 형식으로 변환하고, 공식 아트워크 이미지 URL을 생성하는 로직을 정의합니다.

---

### 파일: src/types/pokemon.ts
---
설명: 포켓몬 데이터의 도메인 모델을 정의하는 TypeScript 인터페이스 파일입니다. API 응답 형식과 앱 내부에서 사용하는 표준 형식을 명확히 구분합니다.
- **PokeApiRawListResponse**: PokeAPI `pokemon?limit=...` 엔드포인트의 응답 형태 (`count`, `next`, `previous`, `results`) 정의
- **PokeApiListItem**: API 리스트 내 개별 항목의 형태 (`name`, `url`) 정의
- **PokemonListItem**: 앱 내부에서 사용하는 표준화된 리스트 아이템 인터페이스 정의
  - `id`: number (URL에서 추출된 ID)
  - `name`: string
  - `image`: string (공식 아트워크 URL)
- **PokemonType**: 포켓몬 타입 (enum: grass, fire, water 등) 정의

### 파일: src/lib/mappers/pokemonMapper.ts
---
설명: 데이터 변환 로직을 전담하는 유틸리티 모듈입니다. API 레이어나 컴포넌트 로직과 분리하여 재사용성을 높입니다.
- **mapToPokemonListItem(raw: PokeApiListItem): PokemonListItem** 함수 구현
  - 입력: `name`과 `url`을 포함한 원본 데이터 객체
  - 처리 로직:
    1. `url` 문자열에서 정규식(`regex`) 또는 `split`을 사용하여 숫자 ID 추출 (예: `.../pokemon/1/` -> `1`)
    2. 추출한 ID를 사용하여 공식 이미지 URL 생성:
       `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/{id}.png`
  - 반환: `id`, `name`, `image` 속성을 가진 객체
- **mapToPokemonList(items: PokeApiListItem[]): PokemonListItem[]** 함수 구현 (배열 매핑)

### 파일: src/lib/utils/validation.ts
---
설명: 데이터 추출 시 안전성을 보장하기 위한 유틸리티 함수입니다.
- **extractIdFromUrl(url: string): number** 함수 구현
  - 유효하지 않은 URL 형식이거나 ID가 없는 경우 에러를 throw하거나 0을 반환하는 방어 로직 포함

### 파일: __tests__/lib/mappers/pokemonMapper.test.ts
---
설명: 매핑 로직의 정확성을 검증하는 유닛 테스트 파일입니다.
- **mapToPokemonListItem 테스트**:
  - 주어진 URL에서 ID를 정확히 추출하는지 확인
  - 생성된 이미지 URL이 공식 포맷을 준수하는지 확인
  - 반환된 객체의 타입이 `PokemonListItem`과 일치하는지 확인