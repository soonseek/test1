# 코드 사양 (Code Specification)

**Task ID**: task-1-1-6
**제목**: API Route 응답 반환 및 에러 처리

이 문서는 Next.js 14+ App Router 환경에서 PokeAPI 데이터를 안전하게 가져와 클라이언트에 제공하기 위한 API Route의 사양을 정의합니다.

---

### 파일: src/app/api/pokemon/[id]/route.ts
---
설명: 특정 포켓몬의 ID를 받아 상세 정보를 반환하는 API 엔드포인트
- HTTP GET 요청을 처리한다.
- URL 파라미터(`params.id`)를 추출하여 숫자로 변환한다.
- `fetchPokemonData` 유틸리티 함수를 호출하여 데이터를 가져온다.
- **성공 시**: 상태 코드 200과 함께 JSON 형식의 데이터를 반환한다.
- **실패 시 (404)**: PokeAPI에 데이터가 없을 경우 상태 코드 404와 에러 메시지(`"Pokemon not found"`)를 반환한다.
- **실패 시 (500)**: 서버 내부 오류나 네트워크 오류 발생 시 상태 코드 500과 에러 메시지(`"Internal Server Error"`)를 반환한다.
- Next.js `NextResponse` 객체를 사용하여 응답을 생성한다.

### 파일: src/lib/api/pokemon.ts
---
설명: PokeAPI 호출 및 데이터 변환 로직을 담당하는 서버 사이드 유틸리티
- `fetchPokemonData(id: number)` 함수를 export 한다.
- `fetch` 함수를 사용하여 `https://pokeapi.co/api/v2/pokemon/${id}`에 요청을 보낸다.
- 응답이 성공적이지 않은 경우(예: 404) 에러를 throw 하여 API Route에서 처리할 수 있도록 한다.
- 네트워크 연결 실패 등의 예외 상황 발생 시 에러를 throw 한다.
- (향후 캐싱 로직이 추가될 수 있는 공간을 확보하되, 현재 Task에서는 직접 호출 및 에러 전파에 집중한다)

### 파일: src/types/pokemon.ts
---
설명: 포켓몬 데이터의 인터페이스를 정의하여 타입 안전성 확보
- `PokemonApiResponse` 인터페이스를 정의한다 (PokeAPI 원본 응답 구조).
- 클라이언트에 반환할 최종 데이터 형태인 `PokemonDetail` 인터페이스를 정의한다.
- 필요한 주요 필드(예: id, name, types, sprites, stats)를 명시한다.