# 코드 사양 (Code Specification)

**Task ID**: task-1-1-7
**제목**: Prisma 스키마 초기 설정 (선택 사항)

## 개요
이 Task는 향후 구현될 데이터 캐싱(FR-005) 및 사용자 선호도 관리(FR-004)를 대비하여 데이터베이스 구조를 정의합니다. Prisma ORM을 사용하며, PostgreSQL 데이터베이스와 연동됩니다.

---

### 파일: prisma/schema.prisma
---
설명: 프로젝트의 데이터 모델을 정의하는 Prisma 스키마 파일입니다. 향후 캐싱 로직과 사용자 기능을 위한 기본 틀을 마련합니다.
- **데이터베이스 공급자 설정**: `datasource db`의 `provider`를 `postgresql`로 설정 (환경 변수 `DATABASE_URL` 사용).
- **Pokemon 모델 (주석 처리)**: 향후 캐싱(FR-005)을 위해 PokeAPI의 데이터 구조(id, name, types 등)를 반영한 모델을 주석으로 작성하여 참조할 수 있도록 합니다.
  - 필드 예시: `id` (Int, @id), `name` (String), `types` (String[]), `imageUrl` (String), `stats` (Json).
- **User 모델**: 비회제 기반(FR-004) 사용자 식별을 위한 모델을 정의합니다.
  - `id`: UUID 형식의 기본 키.
  - `deviceId`: 브라우저/기기를 식별하기 위한 고유 문자열 (추후 Fingerprinting 등으로 획득).
  - `createdAt`: 계정 생성 시간.
- **Favorite 모델**: 사용자의 '좋아요' 상태를 저장하는 모델을 정의합니다.
  - `id`: UUID 형식의 기본 키.
  - `userId`: User 모델과의 관계(Relation).
  - `pokemonId`: 포켓몬의 고유 ID (Int).
  - `user` 관계 정의: `User` 모델과 N:1 관계 설정.
  - `unique` 제약 조건: 동일 사용자가 같은 포켓몬을 중복 좋아요하지 못하도록 `@@unique([userId, pokemonId])` 설정.

### 파일: src/lib/prisma.ts
---
설명: Prisma Client 인스턴스를 생성하고 관리하는 유틸리티 파일입니다. 개발 환경에서의 Hot Reload 문제를 방지하는 싱글톤 패턴을 구현해야 합니다.
- Prisma Client 생성: `PrismaClient` 인스턴스를 생성하는 함수 정의.
- 개발 환경 변수 처리: `process.env.NODE_ENV`가 'development'일 경우, 전역 변수 `globalThis`에 Prisma 인스턴스를 캐싱하여 핫 리로드 시 연결 풀이 중복되는 것을 방지.
- 모듈 export: 생성된 Prisma Client 인스턴스를 `prisma`라는 이름으로 export하여 애플리케이션 전체에서 재사용 가능하도록 함.