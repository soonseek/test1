# 코드 사양 (Code Specification)

**Task ID**: task-1-1-4
**제목**: PokeAPI 외부 데이터 페칭 로직 구현
**작성자**: Next.js 14+ Full-Stack Architect

---

## 개요
이 사양은 PokeAPI(v2)의 엔드포인트를 호출하여 포켓몬 리스트 데이터를 가져오는 서버 사이드 로직을 정의합니다. Next.js 14+ App Router의 Route Handlers를 활용하여 API 라우트를 생성하고, 외부 데이터의 구조에 맞춰 TypeScript 인터페이스를 정의합니다.

---

## 파일 사양

### 파일: `src/types/pokemon.ts`
---
설명: PokeAPI 응답 데이터 및 애플리케이션에서 사용할 포켓몬 데이터의 타입을 정의합니다.
- `PokemonListResponse` 인터페이스 정의 (PokeAPI의 리스트 응답 구조 매핑)
  - `count`: number
  - `next`: string | null
  - `previous`: string | null
  - `results`: `PokemonListItem[]`
- `PokemonListItem` 인터페이스 정의
  - `name`: string
  - `url`: string
- 유틸리티 타입 또는 헬퍼 함수 (선택 사항): URL에서 ID 추출 로직 타입 정의

### 파일: `src/lib/api/pokeapi.ts`
---
설명: 외부 PokeAPI와의 통신을 담당하는 클라이언트 모듈입니다. (재사용성 및 테스트 용이성을 위해 별도 분리)
- `fetchPokemonList` 함수 구현
  - 매개변수: `offset` (number, 기본값 0), `limit` (number, 기본값 20)
  - 반환 타입: `Promise<PokemonListResponse>`
  - 내부 로직:
    - `fetch` 함수 사용 (Next.js Fetch API 확장 기능 활용 가능성 고려)
    - `https://pokeapi.co/api/v2/pokemon` 엔드포인트 호출
    - Query 파라미터(`offset`, `limit`) 조합하여 요청
    - 응답 데이터를 JSON 파싱 후 반환
    - 에러 핸들링 (네트워크 에러 또는 비정상 응답 시 Error throw)

### 파일: `src/app/api/pokemon/route.ts`
---
설명: 클라이언트의 요청을 받아 포켓몬 리스트 데이터를 반환하는 Next.js API Route 핸들러입니다.
- HTTP GET 메서드 핸들러 구현 (`GET` 함수 export)
- 비동기 함수로 정의 (`async function GET`)
- 요청 파라미터 처리:
  - URL Search Params에서 `offset`과 `limit` 값을 추출 (기본값 설정)
- 비즈니스 로직 호출:
  - `src/lib/api/pokeapi.ts`의 `fetchPokemonList` 함수 호출
- 응답 반환:
  - 성공 시: `NextResponse.json()`을 사용하여 200 OK와 함께 데이터 반환
  - 실패 시: 적절한 HTTP 에러 코드(500 등)와 에러 메시지 반환
- CORS 및 보안 헤더 설정 (기본 Next.js 동작 사용)

### 파일: `src/app/page.tsx`
---
설명: 포켓몬 리스트 데이터를 가져와서 UI에 전달하는 서버 컴포넌트입니다. (데이터 페칭 로직 검증용)
- `async` 함수 컴포넌트로 정의
- 데이터 페칭:
  - 내부 API Route(`/api/pokemon`) 또는 직접 `pokeapi.ts` 모듈 호출
  - 초기 데이터(`offset=0`, `limit=20`) 가져오기
- 렌더링:
  - 가져온 데이터를 콘솔에 출력하거나 간단한 리스트 형태로 화면에 출력 (API 동작 확인용)
  - 향후 `PokemonCard` 컴포넌트 연동을 위한 placeholder 구조 유지