# 코드 사양 (Code Specification)

**Task ID**: task-1-1-2
**작성자**: Next.js 14+ Full-Stack Architect

이 문서는 `STORY-1-1`의 인수 조건을 충족하기 위해 생성 및 수정되어야 할 파일들의 사양을 정의합니다.

---

### 파일: src/types/pokemon.ts
---
설명: PokeAPI의 응답 데이터와 우리 애플리케이션에서 사용할 데이터 구조를 정의하는 TypeScript 인터페이스 모음입니다.
- **PokeApiListResponse**: PokeAPI v2 `pokemon?limit=...` 엔드포인트의 응답 형태 매핑 (`count`, `next`, `previous`, `results`).
- **PokeApiListItem**: `results` 배열 내부의 아이템 형태 (`name`, `url`).
- **PokemonListItem**: 클라이언트로 반환할 최종 형태 (`id`, `name`, `image`) 정의.
- (선택) `url` 문자열에서 ID를 추출하는 유틸리티 타입 또는 헬퍼 함수 타입 정의.

### 파일: src/lib/api/pokeapi.ts
---
설명: 외부 PokeAPI와 통신하는 담당하는 라이브러리 레이어입니다. API Route 핸들러의 로직을 분리하여 재사용성과 테스트 가능성을 높입니다.
- `fetchPokemonList(limit: number, offset: number)`: 함수 정의.
- Next.js 내장 `fetch` API를 사용하여 데이터 요청 (Story 인수 조건 3 충족).
- 받아온 데이터(`PokeApiListItem`)를 클라이언트가 필요로 하는 형태(`PokemonListItem`)로 매핑 (ID 추출 및 이미지 URL 생성 로직 포함).
- 네트워크 에러 발생 시 에러를 throw하여 핸들러에서 처리할 수 있도록 함.

### 파일: src/app/api/pokemons/route.ts
---
설명: 클라이언트의 요청을 받아 포켓몬 리스트 데이터를 반환하는 Next.js App Router API 핸들러입니다.
- `GET` 메서드 비동기 함수 `export async function GET(request: Request)` 구현.
- URL 쿼리 파라미터(`page` 또는 `offset`, `limit`) 파싱 로직 포함.
- `src/lib/api/pokeapi.ts`의 `fetchPokemonList` 함수 호출.
- 성공 시 `NextResponse.json()`을 사용하여 JSON 데이터와 200 상태 코드 반환.
- 실패 시 적절한 에러 메시지와 500 상태 코드 반환.
- CORS 및 헤더 설정 (필요 시).

### 파일: src/lib/utils/validation.ts
---
설명: API 요청 파라미터의 유효성을 검사하는 유틸리티 모듈입니다.
- `parsePaginationParams(searchParams)`: 쿼리 파라미터를 받아 숫자로 변환하고, 기본값(default limit: 20, offset: 0)을 설정하는 함수.
- 숫자 변환 실패 시 에러 처리 또는 기본값 반환 로직.