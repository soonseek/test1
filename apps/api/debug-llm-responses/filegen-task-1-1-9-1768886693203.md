```markdown
## 파일: prisma/schema.prisma

```prisma
// Prisma Schema 설정
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Pokemon 모델: PokeAPI 데이터 캐싱용
model Pokemon {
  id        Int      @id // PokeAPI의 ID
  name      String
  types     String[] // 예: ["Fire", "Flying"]
  imageUrl  String
  stats     Json     // HP, 공격력 등
  details   Json     // 키, 몸무게 등
  updatedAt DateTime @updatedAt

  // 관계: 하나의 포켓몬은 여러 Favorite를 가질 수 있음
  favorites Favorite[]
}

// User 모델: 익명 사용자 관리
model User {
  id        String   @id @default(uuid())
  deviceId  String   @unique // 익명 사용자 식별용 고유값
  createdAt DateTime @default(now())

  // 관계: 하나의 유저는 여러 Favorite를 가질 수 있음
  favorites Favorite[]
}

// Favorite 모델: 사용자의 찜 목록
model Favorite {
  id        String   @id @default(uuid())
  userId    String
  pokemonId Int
  createdAt DateTime @default(now())

  // 관계 정의
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  pokemon Pokemon @relation(fields: [pokemonId], references: [id], onDelete: Cascade)

  // 복합 유니크 인덱스 (같은 유저가 같은 포켓몬을 중복 찜하는 것 방지)
  @@unique([userId, pokemonId])
}
```

## 파일: prisma/migrations/20240120000000_init/migration.sql

```sql
-- CreateEnum
-- (Enum 타입이 필요한 경우 여기에 정의하지만, 현재 스키마는 String[] 및 Json 사용)

-- CreateTable: User
CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "deviceId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "User_pkey" PRIMARY KEY ("id")
);

-- CreateTable: Pokemon
CREATE TABLE "Pokemon" (
    "id" INTEGER NOT NULL,
    "name" TEXT NOT NULL,
    "types" TEXT[] NOT NULL,
    "imageUrl" TEXT NOT NULL,
    "stats" JSONB NOT NULL,
    "details" JSONB NOT NULL,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "Pokemon_pkey" PRIMARY KEY ("id")
);

-- CreateTable: Favorite
CREATE TABLE "Favorite" (
    "id" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "pokemonId" INTEGER NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Favorite_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE UNIQUE INDEX "User_deviceId_key" ON "User"("deviceId");
CREATE UNIQUE INDEX "Favorite_userId_pokemonId_key" ON "Favorite"("userId", "pokemonId");

-- AddForeignKey
ALTER TABLE "Favorite" ADD CONSTRAINT "Favorite_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "Favorite" ADD CONSTRAINT "Favorite_pokemonId_fkey" FOREIGN KEY ("pokemonId") REFERENCES "Pokemon"("id") ON DELETE CASCADE ON UPDATE CASCADE;
```

## 파일: src/lib/prisma.ts

```typescript
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  });

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;
```

## 파일: .env

```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/mydb"
```