# 코드 사양 (Code Specification)

**작성자**: Next.js 14+ Full-Stack Architect
**Task ID**: task-1-1-3
**Story ID**: STORY-1-1

---

## 개요
이 사양은 PokeAPI(v2)의 데이터를 Next.js App Router 환경에서 가져오기 위한 **서버 사이드 데이터 페칭 로직과 타입 시스템**을 정의합니다. 클라이언트의 직접 호출을 방지하고 캐싱 전략을 용이하게 하기 위해 Next.js Route Handler(`route.ts`)를 사용하여 API 프록시 계층을 구축합니다.

---

## 파일 사양

### 파일: `src/types/pokemon.ts`
---
설명: PokeAPI의 응답 데이터와 우리 애플리케이션에서 사용할 데이터 형태를 정의하는 TypeScript 인터페이스 모듈입니다.
- **PokeApiListResponse**: PokeAPI `/pokemon` 엔드포인트의 원본 응답 형태 정의 (`count`, `next`, `previous`, `results`)
- **PokeApiResult**: `results` 배열 내부의 개별 항목 형태 정의 (`name`, `url`)
- **PokemonListItem**: 클라이언트로 반환할 최종 데이터 형태 정의 (이름, ID 추출 로직 등을 고려한 구조)

### 파일: `src/lib/api/pokeapi.ts`
---
설명: 외부 API(PokeAPI) 호출을 담당하는 비동기 함수 유틸리티입니다. 순수 데이터 페칭 로직을 분리하여 테스트와 재사용성을 높입니다.
- **fetchPokemonList**: `limit`와 `offset`을 매개변수로 받아 PokeAPI에 GET 요청을 보내는 함수
- `fetch` (Native Web API) 또는 `axios` 사용하여 `https://pokeapi.co/api/v2/pokemon`에 요청
- 네트워크 에러 발생 시 에러를 throw 하여 호출한 곳(route.ts)에서 처리하도록 구현
- 타입 안정성을 위해 `src/types/pokemon.ts`에서 정의한 타입을 반환 타입으로 사용

### 파일: `src/app/api/pokemon/route.ts`
---
설명: 클라이언트(`/pokemon` 경로로 접근)의 요청을 받아 서버에서 데이터를 가공하여 반환하는 Next.js API Route 핸들러입니다.
- **GET 메서드**: HTTP GET 요청을 처리하는 비동기 함수 `GET` 구현
- URL 쿼리 파라미터(`searchParams`)에서 `limit`(기본값: 20)과 `offset`(기본값: 0)을 파싱
- `src/lib/api/pokeapi.ts`의 `fetchPokemonList` 함수 호출
- 응답 데이터가 JSON 형식으로 반환되도록 `NextResponse.json()` 사용
- 에러 발생 시 적절한 HTTP 상태 코드(500 등)와 에러 메시지 반환

---

## 기술 구현 가이드

1.  **타입 안전성**: `any` 타입 사용을 지양하고 `src/types/pokemon.ts`에서 명시한 인터페이스를 준수합니다.
2.  **에러 핸들링**: 외부 API 장애 상황을 대비하여 `try-catch` 블록을 사용하여 서버가 크래시되지 않도록 처리합니다.
3.  **Next.js Fetch 확장**: 향후 캐싱(`revalidate`) 옵션을 적용할 수 있도록 `fetch` 옵션 설정을 고려하여 구조를 잡습니다.