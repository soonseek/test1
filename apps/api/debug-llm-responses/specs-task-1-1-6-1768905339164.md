# 코드 사양 (Code Specification)

**Task ID**: task-1-1-6
**제목**: API Route 응답 반환 및 타입 변환

이 사양은 PokeAPI의 원시 데이터를 클라이언트가 사용하기 최적화된 형태로 변환하고, Next.js App Router의 Response 객체를 통해 안전하게 반환하는 것을 목표로 합니다.

---

### 파일: src/types/pokemon.ts
---
설명: 포켓몬 데이터의 도메인 모델을 정의하는 타입 정의 파일입니다. API 응답과 내부 로직에서 사용하는 데이터 구조를 명시합니다.
- **PokeApiRawListResponse**: PokeAPI v2 `/pokemon?limit=...` 엔드포인트의 원본 응답 형태 정의 (count, next, previous, results)
- **PokeApiListItem**: PokeAPI 결과 리스트 내부의 개별 항목 형태 (name, url)
- **PokemonListItem**: 클라이언트에게 최종적으로 반환할 매핑된 데이터 형태
  - `id`: number (URL에서 추출된 ID)
  - `name`: string
  - `url`: string (원본 URL)

### 파일: src/lib/utils/pokemon.ts
---
설명: 데이터 변환 로직을 담당하는 유틸리티 함수입니다. API 라우트의 비즈니스 로직을 분리하여 테스트 가능성과 재사용성을 높입니다.
- **mapPokemonListData(rawData: PokeApiRawListResponse)**: `PokeApiListItem[]`를 `PokemonListItem[]`로 변환하는 함수
  - `results` 배열을 순회하며 각 항목의 URL에서 ID를 추출(정규식 또는 문자열 처리)하여 객체에 추가
  - 클라이언트에 필요한 구조로 데이터 재구성

### 파일: src/app/api/pokemon/route.ts
---
설명: 포켓몬 목록을 제공하는 API Route 핸들러입니다. GET 요청을 처리하여 JSON 응답을 반환합니다.
- **GET 핸들러**: 비동기 함수로 정의
- **데이터 페칭**: PokeAPI(`https://pokeapi.co/api/v2/pokemon`)에 `fetch` 요청 (Next.js 내장 Fetch 사용)
- **데이터 변환**: `mapPokemonListData` 유틸리티 함수를 사용하여 데이터 매핑
- **응답 반환**: `NextResponse.json()`을 사용하여 변환된 데이터를 JSON 형태로 반환
- **에러 처리**: fetch 실패 시 적절한 HTTP 에러 코드(500 등)와 에러 메시지 반환