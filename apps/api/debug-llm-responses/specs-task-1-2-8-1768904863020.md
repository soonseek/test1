# 코드 사양 (Code Specification)

**Task ID**: task-1-2-8
**제목**: 이미지 로딩 상태 처리(Skeleton UI)
**작성자**: Next.js 14+ Full-Stack Architect

---

## 개요
이 Task는 포켓몬 도감의 메인 리스트 및 상세 페이지에서 이미지 로딩 시 발생하는 깜빡임(FOUC)이나 공백 현상을 방지하기 위해 **Skeleton UI**와 **Blur Placeholder** 기술을 적용합니다. 사용자 경험(UX)을 향상시키고 LCP(Largest Contentful Paint) 성능을 개선하는 것이 핵심 목표입니다.

---

## 파일 사양

### 파일: `src/components/ui/skeleton.tsx`
---
설명: shadcn/ui 표준 스펙을 따르는 Skeleton UI 기본 컴포넌트
- `@radix-ui/react-slot` 기반의 `asChild` 속성 지원
- Tailwind CSS의 `animate-pulse` 유틸리티를 사용하여 깜빡이는 효과 구현
- 다양한 크기와 모양을 지원하기 위해 `className` prop을 완전히 노출
- 접근성을 위해 `aria-hidden="true"` 또는 `role="status"` 속성 고려

### 파일: `src/components/pokemon/pokemon-card-skeleton.tsx`
---
설명: 포켓몬 카드의 로딩 상태를 시각적으로 모방하는 전용 스켈레톤 컴포넌트
- `skeleton.tsx`를 조합하여 카드의 레이아웃(이미지 영역, 텍스트 영역) 재현
- 이미지 영역은 정사각형 비율로, 텍스트 영역은 이름과 ID를 표시할 바 형태로 구성
- 실제 `PokemonCard` 컴포넌트의 높이와 패딩과 동일하게 설정하여 레이아웃 이동(Layout Shift) 방지
- `PokemonCard`가 렌더링되는 그리드 시스템에서 대체 요소로 사용됨

### 파일: `src/components/pokemon/pokemon-card.tsx`
---
설명: 개별 포켓몬 정보를 표시하는 카드 컴포넌트 (수정 및 로딩 로직 추가)
- `next/image`의 `Image` 컴포넌트 사용
- **BlurDataURL 적용**: 저해상도 플레이스홀더(BlurDataURL)를 prop으로 받아 `placeholder="blur"` 속성에 적용
- **Fallback UI**: 이미지 로딩 전 `src`가 준비되지 않았을 때 표시할 기본 UI 또는 Skeleton 처리
- `aria-label`을 사용하여 이미지 대체 텍스트 제공
- 반응형 디자인 유지 (Tailwind 클래스 적용)

### 파일: `src/lib/utils/image-placeholder.ts`
---
설명: 이미지 플레이스홀더 데이터 생성을 위한 유틸리티 함수
- `blurDataURL` 생성 로직 (Base64 인코딩된 작은 이미지 데이터 또는 단색 픽셀 데이터 반환)
- 이미지 로딩 실패 시 대체할 기본 이미지 URL 상수 관리
- 필요시 서버 사이드에서 이미지를 처리하여 흐릿한 썸네일을 생성하는 함수 포함 (선택 사항)

### 파일: `src/app/page.tsx`
---
설명: 메인 페이지 (로딩 상태 통합 로직 수정)
- **Suspense 경계 설정**: `PokemonCard` 리스트를 감싸는 `Suspense` 추가
- `fallback` 속성에 `PokemonCardSkeleton` 컴포넌트를 다중으로 렌더링하여 로딩 중임을 표시
- 데이터 fetching 로직이 완료되기 전까지 UI가 멈춰있지 않도록 비동기 처리

### 파일: `src/app/pokemon/[id]/page.tsx`
---
설명: 상세 페이지 (고해상도 이미지 로딩 최적화)
- 상단에 표시될 큰 포켓몬 이미지에 `next/image` 및 `placeholder="blur"` 적용
- 이미지 로딩 중에 표시될 Skeleton UI를 `Suspense`를 통해 구현
- LCP 성능 저하를 방지하기 위해 `priority` 속성 적용 검토

---

## 기술 구현 가이드

1. **Skeleton UI 패턴**:
   - `skeleton.tsx`는 단순한 `div`에 `animate-pulse`와 배경색을 입힌 형태로 구현합니다.
   - `pokemon-card-skeleton.tsx`는 이를 조합하여 실제 카드와 유사한 형태를 만듭니다.

2. **BlurDataURL 전략**:
   - PokeAPI 이미지는 안정적이나, 네트워크 지연 시 깜빡임이 발생할 수 있습니다.
   - `Image` 컴포넌트의 `placeholder="blur"`와 `blurDataURL="(작은 base64 이미지)"`를 조합하여 부드러운 전환 효과를 줍니다.
   - Base64 데이터는 `lib/utils/image-placeholder.ts`에서 동적으로 생성하거나 정적 값으로 관리합니다.

3. **Suspense 통합**:
   - Next.js App Router의 Streaming 기능을 활용하여, 데이터가 도착하는 대로 컴포넌트를 점진적으로 교체합니다.