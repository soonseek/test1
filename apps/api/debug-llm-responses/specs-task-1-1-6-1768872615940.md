# 코드 사양 (Code Specification)

**Task ID**: task-1-1-6
**제목**: 에러 핸들링 및 타입 가드 추가

이 사양은 PokeAPI 데이터 페칭 로직의 안정성을 보장하기 위해 API 호출 실패 시 에러를 처리하고, 외부 데이터의 신뢰성을 검증하는 타입 가드(Type Guard)를 구현합니다.

---

### 파일: src/types/pokemon.ts
---
설명: 포켓몬 데이터 구조를 정의하는 타입 스크립트 인터페이스 및 타입 가드 함수
- `PokemonListItem` 인터페이스 정의 (name, url)
- `PokemonListResponse` 인터페이스 정의 (count, next, previous, results)
- `isPokemonListResponse` 함수 구현 (타입 가드)
  - 입력값이 `object`인지 확인
  - `results` 배열이 존재하는지 확인
  - `results` 내부 항목이 `name`과 `url`을 가지는지 기본 검증
  - 타입 단언(`is`)을 사용하여 반환 타입 좁히기

### 파일: src/lib/errors/PokemonApiError.ts
---
설명: API 호출 실패 시 발생시키는 커스텀 에러 클래스
- 기본 `Error` 클래스 상속
- 에러 발생 시간 및 메시지를 포함하도록 구조 확장
- 네트워크 실패 또는 잘못된 응답인 경우 명확한 에러 메시지 제공

### 파일: src/lib/api/pokemon.ts
---
설명: PokeAPI v2와 통신하여 데이터를 가져오는 핵심 로직 (수정)
- `fetchPokemonList` 함수 구현
  - `fetch` 호출 시 `next.revalidate` 옵션 적용 (캐싱 전략 유지)
  - 응답 상태가 200이 아닐 경우 `PokemonApiError` 던지기
  - `isPokemonListResponse` 타입 가드를 사용하여 데이터 검증
  - 검증 실패 시 `PokemonApiError` 던지기
  - 검증 성공 시 타입이 보장된 데이터 반환